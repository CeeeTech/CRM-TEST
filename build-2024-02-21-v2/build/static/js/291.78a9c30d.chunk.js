"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[291],{8291:function(e,t,r){r.r(t),r.d(t,{default:function(){return z}});var a=r(7313),i=r(9019),n=r(3497),o=r(4813),s=r(1095),d=r(1113),l=r(4631),c=r(1727),u=r(9860),h=r(8832),p=r(1997),m=r(7983),x=r(6287),g=r(4149),f=r(7890),v=r(7122),C=r(659),j=r(7592),y=r(7551),w=r(430),Z=r(7841),b=r(5211),k=r(6417);const S=.2,_=(0,j.ZP)(w._$)((e=>{let{theme:t}=e;return{[`& .${Z._.row}.even`]:{backgroundColor:t.palette.grey[200],"&:hover, &.Mui-hovered":{backgroundColor:(0,y.Fq)(t.palette.primary.main,S),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,y.Fq)(t.palette.primary.main,S+t.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,y.Fq)(t.palette.primary.main,S+t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,y.Fq)(t.palette.primary.main,S+t.palette.action.selectedOpacity)}}}}}}));function z(){var e;const[t,r]=(0,a.useState)([]),[j,y]=(0,a.useState)([]),{logout:w}=(0,C.a)(),[Z,S]=(0,a.useState)(!0),z=(0,f.s0)(),{user:P}=(0,v.E)(),{permissions:W}=P||{};(0,a.useEffect)((()=>{!async function(){try{const e=await fetch(x.Z.apiUrl+"api/courses",{method:"GET",headers:{Authorization:`Bearer ${P.token}`}});if(!e.ok)return 401===e.status&&(console.error("Unauthorized access. Logging out."),w()),500===e.status?(console.error("Internal Server Error."),void w()):void 0;const t=(await e.json()).filter((e=>!0===e.status)).map((e=>({id:e._id,...e})));r(t),S(!1)}catch(e){console.error("Error fetching data:",e.message),S(!1)}}()}),[]),console.log(t);const F=(0,u.Z)(),L=(0,o.Z)(F.breakpoints.down("md")),N=[{field:"name",headerName:"Course Name",flex:2,width:100,minWidth:150,maxWidth:200},{field:"description",headerName:"Course Description",flex:2.5,width:100,minWidth:250},{field:"edit",headerName:"",description:"This column has a value getter and is not sortable.",sortable:!1,flex:1,width:100,minWidth:150,maxWidth:200,align:"right",headerAlign:"right",renderCell:e=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(s.Z,{variant:"contained",color:"primary",onClick:()=>{var t;t=e.row._id,console.log("clicked user id",t),z("/app/courses/update?id="+t)},sx:{borderRadius:"50%",padding:"8px",minWidth:"unset",width:"32px",height:"32px"},children:(0,k.jsx)(h.Z,{sx:{fontSize:"18px"}})}),(0,k.jsx)(s.Z,{variant:"contained",color:"error",onClick:()=>{},style:{marginLeft:"5px"},sx:{borderRadius:"50%",padding:"8px",minWidth:"unset",width:"32px",height:"32px"},children:(0,k.jsx)(p.Z,{sx:{fontSize:"18px"}})})]})}];return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(n.Z,{title:"View Courses",buttonLabel:null!==W&&void 0!==W&&null!==(e=W.lead)&&void 0!==e&&e.includes("create")?(0,k.jsxs)(k.Fragment,{children:["Add New Course",(0,k.jsx)(b.Z,{style:{marginLeft:"5px"}})," "]}):void 0,onButtonClick:function(){z("/app/courses/add")},children:[Z&&(0,k.jsx)(g.Z,{style:{marginBottom:"30px"}}),(0,k.jsx)(i.ZP,{style:{marginTop:"-30px"},container:!0,direction:"column",justifyContent:"left",children:(0,k.jsxs)(i.ZP,{container:!0,sx:{p:3,marginTop:"4px"},spacing:L?0:2,children:[(0,k.jsxs)(i.ZP,{item:!0,xs:12,sm:3.5,children:[(0,k.jsx)(d.Z,{variant:"h6",component:"h6",style:{marginBottom:"-10px"},children:"Search"}),(0,k.jsx)(l.Z,{fullWidth:!0,margin:"normal",name:"course",type:"text",size:"small",SelectProps:{native:!0},defaultValue:"",InputProps:{startAdornment:(0,k.jsx)(c.Z,{position:"start",children:(0,k.jsx)(m.Z,{})})},onChange:e=>{const r=e.target.value.toLowerCase(),a=t.filter((e=>e.name.toLowerCase().includes(r)));y(a)}})]}),(0,k.jsx)(i.ZP,{item:!0,xs:12,sm:12,children:(0,k.jsx)(_,{rows:j.length>0?j:t,rowHeight:40,columns:N,getRowClassName:e=>e.indexRelativeToCurrentPage%2===0?"even":"odd",initialState:{pagination:{paginationModel:{page:0,pageSize:25}}},getRowId:e=>e._id,getRowStyle:e=>({backgroundColor:e.index%2===0?"#fff":"#f0f8ff"}),pageSizeOptions:[10,25,100],checkboxSelection:!0})})]})})]})})}},5211:function(e,t,r){var a=r(4836);t.Z=void 0;var i=a(r(5045)),n=r(6417),o=(0,i.default)((0,n.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=o}}]);