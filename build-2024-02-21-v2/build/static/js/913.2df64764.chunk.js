"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[913],{3913:function(e,r,t){t.r(r),t.d(r,{default:function(){return P}});var o=t(7313),n=t(4631),i=t(9019),s=t(3497),a=t(4813),c=t(1113),l=t(1727),d=t(2247),u=t(6104),m=t(1095),h=t(9860),p=t(4090),v=t(3463),f=t(9429),g=t(6287),Z=t(4839),x=t(7122),S=t(659),b=t(7114),j=t.n(b),C=t(1399),k=t.n(C),y=t(5281),w=t(6417);function P(){const{user:e}=(0,x.E)(),r=(0,h.Z)(),{logout:t}=(0,S.a)(),b=(0,a.Z)(r.breakpoints.down("md")),C=new URLSearchParams(window.location.search).get("id"),[P,z]=(0,o.useState)(null),M=k()(j().mixin({toast:!0,position:"bottom-end",iconColor:"white",customClass:{popup:"colored-toast"},showConfirmButton:!1,timer:3500,timerProgressBar:!0}));(0,o.useEffect)((()=>{(async()=>{try{if(C){const r=await fetch(g.Z.apiUrl+`api/courses/${C}`,{method:"GET",headers:{Authorization:`Bearer ${e.token}`}});if(!r.ok)return 401===r.status&&(console.error("Unauthorized access. Logging out."),t()),500===r.status?(console.error("Internal Server Error."),void t()):void 0;const o=await r.json();z(o),console.log("Course data:",o)}}catch(r){console.error("Error fetching course data:",r)}})()}),[C]);return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(s.Z,{title:C?"Update Course":"Add New Course",children:(0,w.jsx)(f.J9,{enableReinitialize:!0,initialValues:{name:(null===P||void 0===P?void 0:P.name)||"",description:(null===P||void 0===P?void 0:P.description)||"",code:(null===P||void 0===P?void 0:P.course_code)||""},validationSchema:v.Ry().shape({name:v.Z_().required("Name is required"),description:v.Z_().required("Description is required"),code:v.Z_().required("Course Code is required")}),onSubmit:async(r,o)=>{let{setSubmitting:n,setFieldError:i}=o;console.log("Submitting form with values:",r);const s={name:r.name,description:r.description,code:r.code};try{const r=C?g.Z.apiUrl+`api/course-form-update/${C}`:g.Z.apiUrl+"api/course-form-add-new",o=C?"PUT":"POST";console.log("Submitting request to:",r);const i=await fetch(r,{method:o,headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},body:JSON.stringify(s)});if(!i.ok)return 401===i.status&&(console.error("Unauthorized access. Logging out."),t()),500===i.status?(console.error("Internal Server Error."),void t()):void 0;console.log("Request complete.");const a=await i.json();console.log("Server response:",a),M.fire({icon:"success",title:"Course Details Saved Successfully."})}catch(a){console.error("Error submitting form:",a),M.fire({icon:"error",title:"Error While Saving Course Details."}),i("submit",a.message)}finally{n(!1)}},children:e=>{let{errors:r,handleBlur:t,handleChange:o,handleSubmit:s,isSubmitting:a,touched:h,values:v}=e;return(0,w.jsx)("form",{onSubmit:s,children:(0,w.jsxs)(i.ZP,{container:!0,direction:"column",justifyContent:"center",children:[(0,w.jsxs)(i.ZP,{container:!0,sx:{p:3},spacing:b?0:2,children:[(0,w.jsxs)(i.ZP,{item:!0,xs:12,sm:6,children:[(0,w.jsx)(c.Z,{variant:"h5",component:"h5",children:"Name"}),(0,w.jsx)(n.Z,{fullWidth:!0,margin:"normal",name:"name",type:"text",onBlur:t,onChange:o,value:v.name,error:Boolean(h.name&&r.name),helperText:h.name&&r.name,InputProps:{startAdornment:(0,w.jsx)(l.Z,{position:"start",children:(0,w.jsx)(p.Z,{})})}})]}),(0,w.jsxs)(i.ZP,{item:!0,xs:12,sm:6,children:[(0,w.jsx)(c.Z,{variant:"h5",component:"h5",children:"Course Code"}),(0,w.jsx)(n.Z,{fullWidth:!0,margin:"normal",name:"code",type:"text",onBlur:t,onChange:o,value:v.code,error:Boolean(h.code&&r.code),helperText:h.code&&r.code,InputProps:{startAdornment:(0,w.jsx)(l.Z,{position:"start",children:(0,w.jsx)(Z.Z,{})})}})]}),(0,w.jsxs)(i.ZP,{item:!0,xs:12,sm:12,children:[(0,w.jsx)(c.Z,{variant:"h5",component:"h5",children:"Description"}),(0,w.jsx)(f.gN,{name:"description",children:e=>{let{field:i,meta:s}=e;return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(n.Z,{multiline:!0,minRows:8,fullWidth:!0,margin:"normal",onBlur:t,onChange:o,...i,value:v.description,error:Boolean(h.description&&r.description),helperText:s.touched&&s.error?(0,w.jsx)("div",{style:{color:"red",fontSize:"0.75rem",marginTop:"0.25rem"},children:s.error}):null})})}})]}),(0,w.jsx)(d.Z,{})]}),(0,w.jsx)(d.Z,{sx:{mt:3,mb:2}}),(0,w.jsx)(u.Z,{sx:{justifyContent:"flex-end"},children:(0,w.jsx)(m.Z,{variant:"contained",type:"submit",disabled:a,endIcon:a?(0,w.jsx)(y.Z,{size:20,color:"inherit"}):null,children:C?"Update Course":"Add Course"})})]})})}})})})}},4090:function(e,r,t){var o=t(4836);r.Z=void 0;var n=o(t(5045)),i=t(6417),s=(0,n.default)((0,i.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"}),"Assignment");r.Z=s},4839:function(e,r,t){var o=t(4836);r.Z=void 0;var n=o(t(5045)),i=t(6417),s=(0,n.default)((0,i.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}),"Code");r.Z=s},6104:function(e,r,t){t.d(r,{Z:function(){return f}});var o=t(3366),n=t(7462),i=t(7313),s=t(2197),a=t(1921),c=t(7592),l=t(7342),d=t(7430),u=t(2298);function m(e){return(0,u.ZP)("MuiCardActions",e)}(0,d.Z)("MuiCardActions",["root","spacing"]);var h=t(6417);const p=["disableSpacing","className"],v=(0,c.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,!t.disableSpacing&&r.spacing]}})((e=>{let{ownerState:r}=e;return(0,n.Z)({display:"flex",alignItems:"center",padding:8},!r.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})}));var f=i.forwardRef((function(e,r){const t=(0,l.Z)({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:c}=t,d=(0,o.Z)(t,p),u=(0,n.Z)({},t,{disableSpacing:i}),f=(e=>{const{classes:r,disableSpacing:t}=e,o={root:["root",!t&&"spacing"]};return(0,a.Z)(o,m,r)})(u);return(0,h.jsx)(v,(0,n.Z)({className:(0,s.Z)(f.root,c),ownerState:u,ref:r},d))}))},5281:function(e,r,t){t.d(r,{Z:function(){return z}});var o=t(3366),n=t(7462),i=t(7313),s=t(2197),a=t(1921),c=t(686),l=t(1615),d=t(7342),u=t(7592),m=t(7430),h=t(2298);function p(e){return(0,h.ZP)("MuiCircularProgress",e)}(0,m.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var v=t(6417);const f=["className","color","disableShrink","size","style","thickness","value","variant"];let g,Z,x,S,b=e=>e;const j=44,C=(0,c.F4)(g||(g=b`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),k=(0,c.F4)(Z||(Z=b`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),y=(0,u.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,r[t.variant],r[`color${(0,l.Z)(t.color)}`]]}})((e=>{let{ownerState:r,theme:t}=e;return(0,n.Z)({display:"inline-block"},"determinate"===r.variant&&{transition:t.transitions.create("transform")},"inherit"!==r.color&&{color:(t.vars||t).palette[r.color].main})}),(e=>{let{ownerState:r}=e;return"indeterminate"===r.variant&&(0,c.iv)(x||(x=b`
      animation: ${0} 1.4s linear infinite;
    `),C)})),w=(0,u.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,r)=>r.svg})({display:"block"}),P=(0,u.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.circle,r[`circle${(0,l.Z)(t.variant)}`],t.disableShrink&&r.circleDisableShrink]}})((e=>{let{ownerState:r,theme:t}=e;return(0,n.Z)({stroke:"currentColor"},"determinate"===r.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===r.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:r}=e;return"indeterminate"===r.variant&&!r.disableShrink&&(0,c.iv)(S||(S=b`
      animation: ${0} 1.4s ease-in-out infinite;
    `),k)}));var z=i.forwardRef((function(e,r){const t=(0,d.Z)({props:e,name:"MuiCircularProgress"}),{className:i,color:c="primary",disableShrink:u=!1,size:m=40,style:h,thickness:g=3.6,value:Z=0,variant:x="indeterminate"}=t,S=(0,o.Z)(t,f),b=(0,n.Z)({},t,{color:c,disableShrink:u,size:m,thickness:g,value:Z,variant:x}),C=(e=>{const{classes:r,variant:t,color:o,disableShrink:n}=e,i={root:["root",t,`color${(0,l.Z)(o)}`],svg:["svg"],circle:["circle",`circle${(0,l.Z)(t)}`,n&&"circleDisableShrink"]};return(0,a.Z)(i,p,r)})(b),k={},z={},M={};if("determinate"===x){const e=2*Math.PI*((j-g)/2);k.strokeDasharray=e.toFixed(3),M["aria-valuenow"]=Math.round(Z),k.strokeDashoffset=`${((100-Z)/100*e).toFixed(3)}px`,z.transform="rotate(-90deg)"}return(0,v.jsx)(y,(0,n.Z)({className:(0,s.Z)(C.root,i),style:(0,n.Z)({width:m,height:m},z,h),ownerState:b,ref:r,role:"progressbar"},M,S,{children:(0,v.jsx)(w,{className:C.svg,ownerState:b,viewBox:"22 22 44 44",children:(0,v.jsx)(P,{className:C.circle,style:k,ownerState:b,cx:j,cy:j,r:(j-g)/2,fill:"none",strokeWidth:g})})}))}))}}]);