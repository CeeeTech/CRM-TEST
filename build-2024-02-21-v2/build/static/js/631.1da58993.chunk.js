"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[631],{9780:function(e,t,o){var r=o(7313),n=o(6149),s=o(3604),a=o(9019),i=o(8119),l=o(1113),c=o(2247),d=o(6467),u=o(9536),h=o(4117),m=o(1095),g=o(1163),p=o(647),x=o(483),f=o(9632),v=o(6937),j=o(5091),Z=o(4676),y=o(2639),w=o(4180),b=o(6863),C=o(6287),S=o(7122),k=o(659),_=o(4149),z=(o(6029),o(1746)),E=o(7227),P=o(4859),T=o(3127),L=o(3650),A=o(6417);const B={customNode:L.Z};t.Z=e=>{let{isOpen:t,onClose:o,leadDetails:L}=e;const[D,N]=(0,r.useState)(!1),{user:I}=(0,S.E)(),{logout:U}=(0,k.a)(),[O,W,$]=(0,z.Rr)([]),[R,F,H]=(0,z.ll)([[]]),M=(0,r.useCallback)((e=>F((t=>(0,z.Z_)(e,t)))),[F]);(0,r.useEffect)((()=>{(async()=>{try{if(N(!0),!L)return;const e=await fetch(C.Z.apiUrl+`api/followups/by-lead/${L.id}`,{method:"GET",headers:{Authorization:`Bearer ${I.token}`}});if(e.ok){const t=await e.json();console.log("followup data",t);const o=t.map(((e,t)=>{let o,r,n,s;t%3==0&&(o=150,r=t/3*100,n="right",s="top"),t%3==1&&(o=350,r=(t-1)/3*100,n="right",s="left"),t%3==2&&(o=550,r=(t-2)/3*100,n="bottom",s="left"),r+=50;let a="#e6e3e3";return"New"==e.status&&(a="#c7dbff"),"Dropped"!=e.status&&"Fake"!=e.status||(a="#ffc7d0"),"Duplicate"==e.status&&(a="#fcbca7"),"Registered"==e.status&&(a="#c4ffc2"),"Next intake"==e.status&&(a="#fff2d1"),{id:t.toString(),sourcePosition:n,targetPosition:s,position:{x:o,y:r},type:"customNode",data:{label:e.status,comment:e.date,color:a},handle:{x:.5,y:1}}})),r=t.map(((e,t)=>({id:`e${t}-${t+1}`,source:t.toString(),type:"smoothstep",animated:!0,target:(t+1).toString()})));W(o),F(r)}else console.error("Error fetching followup:",e.statusText),401===e.status?(console.error("Unauthorized access. Logging out."),U()):console.error("Error fetching lead data:",e.statusText)}catch(e){console.error("Error fetching followup:",e.message)}finally{N(!1)}})()}),[L]);const G=()=>{o()};return L?(0,A.jsxs)(n.Z,{open:t,onClose:G,fullWidth:!0,maxWidth:"md",children:[(0,A.jsx)(s.Z,{children:(0,A.jsxs)(a.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,A.jsx)(a.ZP,{item:!0,children:(0,A.jsx)(i.Z,{children:(0,A.jsx)(g.Z,{})})}),(0,A.jsxs)(a.ZP,{item:!0,children:[(0,A.jsx)(l.Z,{variant:"h3",children:L.name}),(0,A.jsxs)(l.Z,{variant:"h5",color:"textSecondary",children:[L.branch," | ",L.course]})]})]})}),(0,A.jsx)(c.Z,{sx:{mt:3,mb:2}}),(0,A.jsx)(d.Z,{children:(0,A.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,A.jsxs)(a.ZP,{item:!0,xs:12,sm:6,children:[(0,A.jsx)(u.Z,{mb:2,children:(0,A.jsx)(l.Z,{variant:"h4",children:"Student Details"})}),V("Location",L.address,(0,A.jsx)(p.Z,{})),V("NIC",L.nic,(0,A.jsx)(y.Z,{})),V("Email",L.email,(0,A.jsx)(f.Z,{})),V("Phone",L.contact_no,(0,A.jsx)(v.Z,{})),V("DOB",L.dob,(0,A.jsx)(b.Z,{}))]}),(0,A.jsxs)(a.ZP,{item:!0,xs:12,sm:6,children:[(0,A.jsx)(u.Z,{mb:2,children:(0,A.jsx)(l.Z,{variant:"h4",children:"Other Details"})}),V("Course",L.course,(0,A.jsx)(x.Z,{})),V("Branch",L.branch,(0,A.jsx)(Z.Z,{})),V("Counsellor",L.counsellor,(0,A.jsx)(g.Z,{})),V("Status",L.status,(0,A.jsx)(j.Z,{})),V("Source",L.source,(0,A.jsx)(w.Z,{}))]}),(0,A.jsxs)(a.ZP,{item:!0,xs:12,children:[(0,A.jsx)(u.Z,{mb:2,children:(0,A.jsx)(l.Z,{variant:"h4",children:"Follow-up History"})}),D?(0,A.jsx)(_.Z,{}):(0,A.jsx)("div",{style:{width:"100%",height:"50vh"},children:(0,A.jsxs)(z.x$,{nodes:O,edges:R,onNodesChange:$,onEdgesChange:H,onConnect:M,nodeTypes:B,children:[(0,A.jsx)(E.Z,{}),(0,A.jsx)(P.a,{}),(0,A.jsx)(T.A,{variant:"dots",gap:12,size:1})]})})]})]})}),(0,A.jsx)(c.Z,{sx:{mt:3,mb:2}}),(0,A.jsx)(h.Z,{children:(0,A.jsx)(m.Z,{onClick:G,color:"primary",children:"Close"})})]}):null;function V(e,t,o){if("DOB"===e&&t){t=new Date(t).toLocaleDateString()}return(0,A.jsx)(u.Z,{sx:{marginBottom:1},children:(0,A.jsxs)(l.Z,{variant:"body1",display:"flex",alignItems:"center",children:[o&&(0,A.jsx)("span",{style:{marginRight:"8px"},children:o}),(0,A.jsxs)("span",{children:[e,":"]}),"\xa0\xa0",t]})})}}},3650:function(e,t,o){var r=o(7313),n=o(1746),s=o(9224),a=o(6417);const i=s.ZP.div`
  padding: 10px 20px;
  border-radius: 5px;
  background: ${e=>e.theme.nodeBg};
  color: ${e=>e.theme.nodeColor};
  border: 1px solid ${e=>e.selected?e.theme.primary:e.theme.nodeBorder};

  .react-flow__handle {
    background: ${e=>e.theme.primary};
    width: 8px;
    height: 10px;
    border-radius: 5px;
  }
`;t.Z=(0,r.memo)((e=>{let{data:t,selected:o}=e;return(0,a.jsx)("div",{style:{backgroundColor:t.color,borderRadius:"5px"},children:(0,a.jsxs)(i,{selected:o,children:[(0,a.jsx)(n.HH,{type:"target",position:n.Ly.Left}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:t.label}),(0,a.jsx)("p",{style:{marginTop:"-2px"},children:t.comment})]}),(0,a.jsx)(n.HH,{type:"source",position:n.Ly.Right})]})})}))},4299:function(e,t,o){o.r(t),o.d(t,{default:function(){return V}});var r=o(7313),n=o(9019),s=o(3497),a=o(4813),i=o(4631),l=o(5281),c=o(1113),d=o(1727),u=o(9860),h=o(40),m=o(297),g=o(8370),p=o(5769),x=o(8832),f=o(1997),v=o(8623),j=o(4090),Z=o(5927),y=o(5211),w=o(8975),b=o(7983),C=o(1095),S=o(7890),k=o(7122),_=o(4149),z=o(6287),E=o(659),P=o(9780),T=o(1689),L=o(7114),A=o.n(L),B=o(1399),D=o.n(B),N=o(7592),I=o(7551),U=o(430),O=o(7841),W=o(5551),$=o(7030),R=o(3745),F=o(1163),H=o(6417);const M=.2,G=(0,N.ZP)(U._$)((e=>{let{theme:t}=e;return{[`& .${O._.row}.even`]:{backgroundColor:t.palette.grey[200],"&:hover, &.Mui-hovered":{backgroundColor:(0,I.Fq)(t.palette.primary.main,M),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,I.Fq)(t.palette.primary.main,M+t.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,I.Fq)(t.palette.primary.main,M+t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,I.Fq)(t.palette.primary.main,M+t.palette.action.selectedOpacity)}}}}}}));function V(){var e,t,o,L;const{logout:B}=(0,E.a)(),{user:N}=(0,k.E)(),{permissions:I}=N||{},{userType:U}=N||{},O=(0,S.s0)(),M=(0,u.Z)(),V=(0,a.Z)(M.breakpoints.down("md")),q={facebook:(0,H.jsx)(h.Z,{color:"primary",style:{color:"blue"}}),manual:(0,H.jsx)(p.Z,{color:"primary",style:{color:"green"}}),internal:(0,H.jsx)(g.Z,{color:"primary",style:{color:"orange"}}),bulk:(0,H.jsx)(m.Z,{color:"primary",style:{color:"orange"}})},[J,Y]=(0,r.useState)([]),[K,Q]=(0,r.useState)([]),[X,ee]=(0,r.useState)([]),[te,oe]=(0,r.useState)(""),[re,ne]=(0,r.useState)(""),[se,ae]=(0,r.useState)(""),[ie,le]=(0,r.useState)(""),[ce,de]=(0,r.useState)(""),[ue,he]=(0,r.useState)(""),[me,ge]=(0,r.useState)(!0),[pe,xe]=(0,r.useState)(null),[fe,ve]=(0,r.useState)(""),[je,Ze]=(0,r.useState)([]),[ye,we]=(0,r.useState)([]),[be,Ce]=(0,r.useState)([]),[Se,ke]=(0,r.useState)(!1),[_e,ze]=(0,r.useState)([]),[Ee,Pe]=(0,r.useState)([]),Te=["admin","sup_admin","gen_supervisor"].includes(null===U||void 0===U?void 0:U.name),Le=D()(A().mixin({toast:!0,position:"bottom-end",iconColor:"white",customClass:{popup:"colored-toast"},showConfirmButton:!1,timer:3500,timerProgressBar:!0})),Ae=()=>{Le.fire({icon:"success",title:"Status Reversed Successfully."})},Be=()=>{Le.fire({icon:"error",title:"Error Occured."})},De=()=>{Le.fire({icon:"success",title:"Leads Deleted Successfully."})},Ne=()=>{Le.fire({icon:"error",title:"Error Occured While Deleting Leads."})},Ie=[{field:"source",headerName:"",width:10,align:"center",renderCell:e=>(0,H.jsx)(T.Z,{title:e.row.source,arrow:!0,children:q[e.row.source]})},{field:"reference_number",headerName:"#",align:"center",width:55,headerAlign:"center"},{field:"date",headerName:"Date",flex:0,width:100,minWidth:50},{field:"name",headerName:"Student Name",flex:.5,width:100,minWidth:150},{field:"contact_no",headerName:"Contact No",flex:1,width:100,minWidth:150},{field:"status",headerName:"Status",flex:1,width:100,minWidth:150},{field:"course_code",headerName:"Course",flex:.5,width:100,minWidth:50},{field:"counsellor",headerName:"Assign To",description:"This column has a value getter and is not sortable.",sortable:!1,flex:1,width:100,minWidth:150,align:"left",renderCell:e=>Te?(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(v.Z,{disablePortal:!0,id:"combo-box-demo",options:_e.concat(Ee),sx:{width:200,my:2},renderInput:e=>(0,H.jsx)(i.Z,{...e,variant:"standard"}),value:e.row.counsellor,onChange:(t,o)=>{console.log("cid1",e.row.counsellor),console.log("cid",o.label),console.log("lid",e.row.id);const r=e.row.id,n=o.id;e.row.counsellor=o.label;(async()=>{try{const e=await fetch(z.Z.apiUrl+"api/counsellorAssignment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${N.token}`},body:JSON.stringify({counsellor_id:n,lead_id:r})});if(!e.ok){if(401===e.status)console.error("Unauthorized access. Logging out."),B();else{if(500===e.status)return console.error("Internal Server Error."),void B();console.error("Error updating lead data",e.statusText)}return}console.log(o.label),console.log("Successfully assigned"),Le.fire({icon:"success",title:"Assignment Successfull."})}catch(e){console.log(e),Le.fire({icon:"error",title:"Error While Assigning."})}})()}})}):(0,H.jsx)(H.Fragment,{children:e.row.counsellor?`Assigned to ${e.row.counsellor}`:"Pending"})},{field:"edit",headerName:"",description:"This column has a value getter and is not sortable.",sortable:!1,width:135,align:"right",renderCell:e=>{var t;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(C.Z,{variant:"contained",color:"primary",onClick:()=>{var t;t=e.row.id,console.log("clicked lead id",t),O("/app/leads/update?id="+t)},sx:{borderRadius:"50%",padding:"8px",minWidth:"unset",width:"32px",height:"32px"},children:(0,H.jsx)(x.Z,{sx:{fontSize:"18px"}})}),(null===I||void 0===I||null===(t=I.lead)||void 0===t?void 0:t.includes("delete"))&&(0,H.jsx)(C.Z,{variant:"contained",color:"error",onClick:()=>{Fe(e.row.id)},style:{marginLeft:"5px"},sx:{borderRadius:"50%",padding:"8px",minWidth:"unset",width:"32px",height:"32px"},children:(0,H.jsx)(f.Z,{sx:{fontSize:"18px"}})}),"Registered"!=e.row.status&&"Fake"!=e.row.status&&"Duplicate"!=e.row.status&&"Dropped"!=e.row.status&&(0,H.jsx)(C.Z,{variant:"contained",color:"success",onClick:()=>{O("/app/leads/addfollowup?id="+e.row.id)},style:{marginLeft:"5px"},sx:{borderRadius:"50%",padding:"8px",minWidth:"unset",width:"32px",height:"32px",backgroundColor:"#039116"},children:(0,H.jsx)(W.Z,{sx:{fontSize:"18px",color:"white"}})}),("Registered"==e.row.status||"Fake"==e.row.status||"Duplicate"==e.row.status||"Dropped"==e.row.status)&&(0,H.jsx)(C.Z,{variant:"contained",color:"success",onClick:()=>{(async e=>{try{console.log("my lead id",e);const t=await fetch(z.Z.apiUrl+"api/lead-restore/",{method:"POST",headers:{Authorization:`Bearer ${N.token}`,"Content-Type":"application/json"},body:JSON.stringify({id:e})});if(!t.ok){if(401===t.status)console.error("Unauthorized access. Logging out."),B();else{if(500===t.status)return console.error("Internal Server Error."),void B();Be(),console.error("Error fetching sources:",t.statusText)}return}{const e=await t.json();console.log(e),ge(!0),Ae(),Oe()}}catch(t){Be(),console.error("Error fetching sources:",t.message)}})(e.row.id)},style:{marginLeft:"5px"},sx:{borderRadius:"50%",padding:"8px",minWidth:"unset",width:"32px",height:"32px",backgroundColor:"#d1bd0a"},children:(0,H.jsx)($.Z,{sx:{fontSize:"18px",color:"white"}})})]})}}],Ue=e=>{if("other"===e.toLowerCase())return"Other";return e.split(" ").map((e=>e.replace(/[()]/g,"").charAt(0).toUpperCase())).join("")};async function Oe(){try{var e,t,o;const r=z.Z.apiUrl+"api/leads-details",n=await fetch(r,{method:"GET",headers:{Authorization:`Bearer ${N.token}`}});if(!n.ok){if(401===n.status)console.error("Unauthorized access. Logging out."),B();else{if(500===n.status)return console.error("Internal Server Error."),void B();console.error("Error fetching leads data",n.statusText)}return}let s=await n.json();if(s=s.map((e=>{const t=e.student_id||{};return{reference_number:e.reference_number,id:e._id,date:e.date,scheduled_at:e.scheduled_at||null,scheduled_to:e.scheduled_to||null,name:t.name||null,contact_no:t.contact_no||null,address:t.address||null,dob:t.dob||null,email:t.email||null,nic:t.nic||null,course:e.course_id.name,course_code:Ue(e.course_id.name),branch:e.branch_id.name,source:e.source_id?e.source_id.name:null,counsellor:e.assignment_id?e.assignment_id.counsellor_id.name:null,counsellor_id:e.assignment_id?e.assignment_id.counsellor_id._id:null,assigned_at:e.counsellorAssignment?e.counsellorAssignment.assigned_at:null,user_id:e.user_id||null,status:e.status_id?e.status_id.name:null}})),null!==I&&void 0!==I&&null!==(e=I.lead)&&void 0!==e&&e.includes("read-all"))return Ce(s),ee(s),void ge(!1);if(null!==I&&void 0!==I&&null!==(t=I.lead)&&void 0!==t&&t.includes("read")&&"counselor"===(null===U||void 0===U?void 0:U.name)){const e=s.filter((e=>e.counsellor_id===N._id));return Ce(e),ee(e),void ge(!1)}if(null!==I&&void 0!==I&&null!==(o=I.lead)&&void 0!==o&&o.includes("read")&&"user"===(null===U||void 0===U?void 0:U.name)){const e=s.filter((e=>e.user_id===N._id));return Ce(e),ee(e),void ge(!1)}}catch(r){console.log("Error fetching leads:",r)}}(0,r.useEffect)((()=>{Oe();(async()=>{try{const e=await fetch(z.Z.apiUrl+"api/courses",{method:"GET",headers:{Authorization:`Bearer ${N.token}`}});if(!e.ok){if(401===e.status)console.error("Unauthorized access. Logging out."),B();else{if(500===e.status)return console.error("Internal Server Error."),void B();console.error("Error fetching courses:",e.statusText)}return}{const t=await e.json();Y(t)}}catch(e){console.error("Error fetching courses:",e.message)}})();(async()=>{try{const e=await fetch(z.Z.apiUrl+"api/source",{method:"GET",headers:{Authorization:`Bearer ${N.token}`}});if(!e.ok){if(401===e.status)console.error("Unauthorized access. Logging out."),B();else{if(500===e.status)return console.error("Internal Server Error."),void B();console.error("Error fetching sources:",e.statusText)}return}{const t=await e.json();Q(t)}}catch(e){console.error("Error fetching sources:",e.message)}})(),async function(){try{const e=await fetch(z.Z.apiUrl+"api/getCounsellors",{method:"GET",headers:{Authorization:`Bearer ${N.token}`}});if(!e.ok){if(401===e.status)console.error("Unauthorized access. Logging out."),B();else{if(500===e.status)return console.error("Internal Server Error."),void B();console.error("Error fetching counselors:",e.statusText)}return}const t=await e.json();ze(t)}catch(e){console.log("Error fetching counselors:",e)}}(),async function(){try{const e=await fetch(z.Z.apiUrl+"api/getAdminCounselors",{method:"GET",headers:{Authorization:`Bearer ${N.token}`}});if(!e.ok){if(401===e.status)console.error("Unauthorized access. Logging out."),B();else{if(500===e.status)return console.error("Internal Server Error."),void B();console.error("Error fetching counselors:",e.statusText)}return}const t=await e.json();Pe(t)}catch(e){console.log("Error fetching counselors:",e)}}()}),[]),(0,r.useEffect)((()=>{!async function(){try{const e=await fetch(z.Z.apiUrl+"api/status",{method:"GET",headers:{Authorization:`Bearer ${N.token}`}});if(!e.ok){if(401===e.status)console.error("Unauthorized access. Logging out."),B();else{if(500===e.status)return console.error("Internal Server Error."),void B();console.error("Error fetching status:",e.statusText)}return}{const t=await e.json();Ze(t)}}catch(e){console.error("Error fetching status:",e.message)}}()}),[]);const We=(e,t)=>!t||e===t,$e=e=>{if(!ie&&!ce)return!0;const t=new Date(e),o=ie?new Date(ie):null,r=ce?new Date(ce):null;return o&&r?t>=o&&t<=r:o?t>=o:!r||t<=r};(0,r.useEffect)((()=>{(()=>{const e=X.filter((e=>{const t=We(e.course,te),o=We(e.source,re),r=We(e.status,fe),n=$e(e.date),s=We(e.counsellor,se);return t&&o&&r&&n&&s}));Ce(e)})()}),[te,re,fe,ie,ce,se]);const Re=(e,t)=>{const o=X.filter((o=>{const r=new Date(o.date),n=e?new Date(e):null,s=t?new Date(t):null;return e&&t?r>=n&&r<=s:e?r>=n:!t||r<=s}));Ce(o),console.log(o)};const Fe=e=>{A().fire({title:"Are you sure?",text:"You will not be able to recover this file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then((t=>{t.isConfirmed&&async function(e){ke(!0);try{const t=await fetch(z.Z.apiUrl+"api/leads-archive",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${N.token}`},body:JSON.stringify({ids:e})});if(!t.ok){if(401===t.status)console.error("Unauthorized access. Logging out."),B();else{if(500===t.status)return console.error("Internal Server Error."),void B();console.error("Error fetching sources:",t.statusText),Ne()}return}{const e=await t.json();console.log(e),ge(!0),Oe(),De()}}catch(t){console.error("Error fetching sources:",t.message),Ne()}finally{ke(!1)}}([e])}))};return(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)(s.Z,{title:"View Leads",isDeleting:Se,arrIds:ye,buttonLabel:null!==I&&void 0!==I&&null!==(e=I.lead)&&void 0!==e&&e.includes("create")?(0,H.jsxs)(H.Fragment,{children:["Add New Lead",(0,H.jsx)(y.Z,{style:{marginLeft:"5px"}})," "]}):void 0,onButtonClick:function(){O("/app/leads/add")},buttonLabelExport:null!==I&&void 0!==I&&null!==(t=I.lead)&&void 0!==t&&t.includes("read-all")?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(w.Z,{style:{fontSize:"25px"}})," "]}):void 0,buttonLabelDeleteAll:ye.length>1&&(null===I||void 0===I||null===(o=I.lead)||void 0===o?void 0:o.includes("delete-all"))&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(f.Z,{sx:{fontSize:"20px"}}),Se?(0,H.jsx)(l.Z,{size:24,color:"inherit"}):(0,H.jsx)("span",{style:{marginLeft:"8px",fontWeight:"bold"},children:"Delete Leads"})]}),onButtonClickDeleteAll:()=>{ye.length>1?A().fire({title:"Are you sure?",text:"You will not be able to recover this file!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then((e=>{e.isConfirmed&&async function(){ke(!0);try{const e=await fetch(z.Z.apiUrl+"api/leads-archive",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${N.token}`},body:JSON.stringify({ids:ye})});if(!e.ok){if(401===e.status)console.error("Unauthorized access. Logging out."),B();else{if(500===e.status)return console.error("Internal Server Error."),void B();console.error("Error fetching sources:",e.statusText),Ne()}return}{const t=await e.json();console.log(t),ge(!0),we([]),Oe(),De()}}catch(e){console.error("Error fetching sources:",e.message),Ne()}finally{ke(!1)}}()})):Le.fire({icon:"error",title:"No Lead Selected."})},onButtonClickExport:()=>{const e=[],t=Object.keys(be[0]);e.push(t.join(","));for(const a of be){const o=t.map((e=>`"${(""+a[e]).replace(/"/g,'\\"')}"`));e.push(o.join(","))}const o=e.join("\n"),r=new Blob([o],{type:"text/csv"}),n=window.URL.createObjectURL(r),s=document.createElement("a");s.setAttribute("hidden",""),s.setAttribute("href",n),s.setAttribute("download","leads.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},children:[me&&(0,H.jsx)(_.Z,{style:{marginBottom:"30px"}}),(0,H.jsxs)(n.ZP,{style:{marginTop:"-30px"},container:!0,direction:"column",justifyContent:"left",children:[(0,H.jsxs)(n.ZP,{container:!0,sx:{p:3,marginTop:"4px"},spacing:V?0:2,children:[(0,H.jsx)(n.ZP,{container:!0,direction:"column",children:(0,H.jsxs)(n.ZP,{container:!0,spacing:V?0:2,children:[(0,H.jsxs)(n.ZP,{item:!0,xs:12,sm:2.5,children:[(0,H.jsx)(c.Z,{variant:"h6",component:"h6",style:{marginBottom:"-10px"},children:"Search"}),(0,H.jsx)(i.Z,{fullWidth:!0,margin:"normal",name:"search",type:"text",size:"small",SelectProps:{native:!0},value:ue,onChange:e=>{const{value:t}=e.target;he(t),(e=>{const t=X.filter((t=>{const o=e.toLowerCase();return t.name&&t.name.toLowerCase().includes(o)||t.nic&&t.nic.toLowerCase().includes(o)||t.email&&t.email.toLowerCase().includes(o)||t.contact_no&&t.contact_no.toLowerCase().includes(o)}));Ce(t),console.log(t)})(t)},InputProps:{startAdornment:(0,H.jsx)(d.Z,{position:"start",children:(0,H.jsx)(b.Z,{})})}})]}),(0,H.jsxs)(n.ZP,{item:!0,xs:12,sm:1.5,children:[(0,H.jsx)(c.Z,{variant:"h6",component:"h6",style:{marginBottom:"-10px"},children:"Course"}),(0,H.jsxs)(i.Z,{fullWidth:!0,margin:"normal",name:"course",size:"small",select:!0,SelectProps:{native:!0},value:te,onChange:e=>{oe(e.target.value),console.log(e.target.value),(e=>{const t=X.filter((t=>t.course===e));Ce(t),console.log(t)})(e.target.value)},InputProps:{startAdornment:(0,H.jsx)(d.Z,{position:"start",children:(0,H.jsx)(j.Z,{})})},children:[(0,H.jsx)("option",{value:"",disabled:!0}),J&&J.length>0?J.map((e=>(0,H.jsx)("option",{value:e.name,children:e.name},e._id))):(0,H.jsx)("option",{value:"",disabled:!0,children:"No Courses available"})]})]}),(0,H.jsxs)(n.ZP,{item:!0,xs:12,sm:1.5,children:[(0,H.jsx)(c.Z,{variant:"h6",component:"h6",style:{marginBottom:"-10px"},children:"Source"}),(0,H.jsxs)(i.Z,{fullWidth:!0,margin:"normal",name:"media",size:"small",select:!0,SelectProps:{native:!0},value:re,onChange:e=>{ne(e.target.value),(e=>{const t=X.filter((t=>t.source===e));Ce(t),console.log(t)})(e.target.value)},InputProps:{startAdornment:(0,H.jsx)(d.Z,{position:"start",children:(0,H.jsx)(Z.Z,{})})},children:[(0,H.jsx)("option",{value:"",disabled:!0}),K&&K.length>0?K.map((e=>(0,H.jsx)("option",{value:e.name,children:e.name},e._id))):(0,H.jsx)("option",{value:"",disabled:!0,children:"No Sources available"})]})]}),(0,H.jsxs)(n.ZP,{item:!0,xs:12,sm:1.5,children:[(0,H.jsx)(c.Z,{variant:"h6",component:"h6",style:{marginBottom:"-10px"},children:"Status"}),(0,H.jsxs)(i.Z,{fullWidth:!0,margin:"normal",name:"status",size:"small",select:!0,SelectProps:{native:!0},value:fe,onChange:e=>{ve(e.target.value),(e=>{const t=X.filter((t=>t.status===e));Ce(t),console.log(t)})(e.target.value)},InputProps:{startAdornment:(0,H.jsx)(d.Z,{position:"start",children:(0,H.jsx)(g.Z,{})})},children:[(0,H.jsx)("option",{value:"",disabled:!0}),je&&je.length>0?je.map((e=>(0,H.jsx)("option",{value:e.name,children:e.name},e._id))):(0,H.jsx)("option",{value:"",disabled:!0,children:"No Status available"})]})]}),(null===I||void 0===I||null===(L=I.lead)||void 0===L?void 0:L.includes("read-all"))&&(0,H.jsxs)(n.ZP,{item:!0,xs:12,sm:1.5,children:[(0,H.jsx)(c.Z,{variant:"h6",component:"h6",style:{marginBottom:"-10px"},children:"Counselor"}),(0,H.jsxs)(i.Z,{fullWidth:!0,margin:"normal",name:"counselor",size:"small",select:!0,SelectProps:{native:!0},value:se,onChange:e=>{ae(e.target.value),console.log(e.target.value),(e=>{const t=X.filter((t=>t.counsellor===e));Ce(t),console.log(t)})(e.target.value)},InputProps:{startAdornment:(0,H.jsx)(d.Z,{position:"start",children:(0,H.jsx)(F.Z,{})})},children:[(0,H.jsx)("option",{value:"",disabled:!0}),_e.concat(Ee)&&_e.concat(Ee).length>0?_e.concat(Ee).map((e=>(0,H.jsx)("option",{value:e.label,children:e.label},e.id))):(0,H.jsx)("option",{value:"",disabled:!0,children:"No Counselors available"})]})]}),(0,H.jsxs)(n.ZP,{item:!0,xs:12,sm:1.5,children:[(0,H.jsx)(c.Z,{variant:"h6",component:"h6",style:{marginBottom:"-10px"},children:"Date From"}),(0,H.jsx)(i.Z,{fullWidth:!0,margin:"normal",name:"date",type:"date",size:"small",value:ie,onChange:e=>{const t=e.target.value;le(t),Re(t,ce)},InputLabelProps:{shrink:!0}})]}),(0,H.jsxs)(n.ZP,{item:!0,xs:12,sm:1.5,children:[(0,H.jsx)(c.Z,{variant:"h6",component:"h6",style:{marginBottom:"-10px"},children:"Date To"}),(0,H.jsx)(i.Z,{fullWidth:!0,margin:"normal",name:"date",type:"date",size:"small",value:ce,onChange:e=>{const t=e.target.value;de(t),Re(ie,t)}})]}),(0,H.jsx)(n.ZP,{style:{marginTop:"30px"},item:!0,xs:12,sm:.5,children:(0,H.jsx)(C.Z,{variant:"contained",color:"error",sx:{borderRadius:"50%",padding:"8px",minWidth:"unset",width:"32px",height:"32px"},onClick:()=>{oe(""),ne(""),ae(""),le(""),de(""),he(""),ve(""),Ce(X)},children:(0,H.jsx)(R.Z,{sx:{fontSize:"18px"}})})})]})}),(0,H.jsx)(n.ZP,{container:!0,sx:{marginTop:"2px"},alignItems:"flex-start",spacing:V?0:2,children:(0,H.jsx)(n.ZP,{alignItems:"flex-start",item:!0,xs:12,sm:12,children:!me&&(0,H.jsx)(G,{rows:be,rowHeight:40,columns:Ie,getRowClassName:e=>e.indexRelativeToCurrentPage%2===0?"even":"odd",onRowClick:(e,t)=>{const o=t.target.closest(".MuiDataGrid-cell").getAttribute("data-field");console.log(e),console.log(o),"counsellor"!=o&&"edit"!=o&&(e=>{xe(e.row),console.log(e.row)})(e)},initialState:{pagination:{paginationModel:{page:0,pageSize:25}}},getRowId:e=>e.id,getRowStyle:e=>({backgroundColor:e.index%2===0?"#fff":"#f0f8ff"}),pageSizeOptions:[10,25,100],checkboxSelection:!0,onRowSelectionModelChange:e=>{we(e)}})})})]}),(0,H.jsx)(P.Z,{isOpen:!!pe,onClose:()=>xe(null),leadDetails:pe})]})]})})}},5211:function(e,t,o){var r=o(4836);t.Z=void 0;var n=r(o(5045)),s=o(6417),a=(0,n.default)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=a},4090:function(e,t,o){var r=o(4836);t.Z=void 0;var n=r(o(5045)),s=o(6417),a=(0,n.default)((0,s.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"}),"Assignment");t.Z=a},3745:function(e,t,o){var r=o(4836);t.Z=void 0;var n=r(o(5045)),s=o(6417),a=(0,n.default)((0,s.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"HighlightOff");t.Z=a},5927:function(e,t,o){var r=o(4836);t.Z=void 0;var n=r(o(5045)),s=o(6417),a=(0,n.default)((0,s.jsx)("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}),"InsertLink");t.Z=a},297:function(e,t,o){var r=o(4836);t.Z=void 0;var n=r(o(5045)),s=o(6417),a=(0,n.default)((0,s.jsx)("path",{d:"M6 13c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm6-10C9.8 3 8 4.8 8 7s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm6 10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4z"}),"Workspaces");t.Z=a}}]);